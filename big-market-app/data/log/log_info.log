24-11-15.01:45:51.284 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Starting RaffleActivityAccountQuotaServiceTest using Java 1.8.0_432 on myarch with PID 186748 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.01:45:51.285 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - The following 1 profile is active: "dev"
24-11-15.01:45:52.150 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.01:45:52.153 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.01:45:52.194 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
24-11-15.01:45:53.240 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.01:45:53.401 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.01:45:53.412 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.01:45:56.546 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.01:45:56.617 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.01:45:56.696 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#5e385b6f:0/SimpleConnection@7846913f [delegate=amqp://admin@127.0.0.1:5672/, localPort= 40108]
24-11-15.01:45:56.809 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Started RaffleActivityAccountQuotaServiceTest in 5.888 seconds (JVM running for 6.561)
24-11-15.01:45:57.031 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.01:45:57.282 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.01:45:57.394 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 装配活动：true
24-11-15.01:45:57.407 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期， 状态】校验开始: sku:9011, activityId:100301
24-11-15.01:45:57.407 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。sku:9011, activityId:100301
24-11-15.01:45:57.413 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】成功。sku:9011, activityId:100301
24-11-15.01:45:57.459 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.01:45:57.478 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.01:45:57.565 [main            ] ERROR ActivityRepository     - 写入订单记录，唯一索引冲突 userId: xiaofuge activityId: 100301 sku: 9011
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '70009240609001' for key 'raffle_activity_order_001.uq_out_business_no'
### The error may exist in file [/home/mufen/Downloads/big-market/big-market-app/target/classes/mybatis/mapper/raffle_activity_order_mapper.xml]
### The error may involve site.mufen.infrastructure.persistent.dao.IRaffleActivityOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into raffle_activity_order_001         (user_id, sku, activity_id, activity_name, strategy_id, order_id, order_time, state, out_business_no, total_count, day_count, month_count,          pay_amount ,create_time, update_time)         values         (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,         ? ,now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '70009240609001' for key 'raffle_activity_order_001.uq_out_business_no'
; Duplicate entry '70009240609001' for key 'raffle_activity_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '70009240609001' for key 'raffle_activity_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy114.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy120.insert(Unknown Source)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at cn.bugstack.middleware.db.router.DBRouterJoinPoint.doRouter(DBRouterJoinPoint.java:65)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at com.sun.proxy.$Proxy121.insert(Unknown Source)
	at site.mufen.infrastructure.persistent.repository.ActivityRepository.lambda$doSaveCreditPayOrder$1(ActivityRepository.java:232)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at site.mufen.infrastructure.persistent.repository.ActivityRepository.doSaveCreditPayOrder(ActivityRepository.java:229)
	at site.mufen.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$8f583363.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at site.mufen.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$298b8274.doSaveCreditPayOrder(<generated>)
	at site.mufen.domain.activity.service.quota.policy.impl.CreditPayTradePolicy.trade(CreditPayTradePolicy.java:26)
	at site.mufen.domain.activity.service.quota.AbstractRaffleActivityAccountQuota.createSkuRechargeOrder(AbstractRaffleActivityAccountQuota.java:71)
	at site.mufen.test.domain.activity.RaffleActivityAccountQuotaServiceTest.test_credit_pay_trade(RaffleActivityAccountQuotaServiceTest.java:86)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '70009240609001' for key 'raffle_activity_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy211.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 77 common frames omitted
24-11-15.01:45:57.609 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:45:57.610 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:45:57.611 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:45:57.612 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:45:57.773 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:45:57.778 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:45:57.787 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:45:57.792 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:45:57.795 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:45:57.796 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:45:57.796 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:45:57.796 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:47:06.861 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Starting RaffleActivityAccountQuotaServiceTest using Java 1.8.0_432 on myarch with PID 187743 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.01:47:06.863 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - The following 1 profile is active: "dev"
24-11-15.01:47:08.217 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.01:47:08.222 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.01:47:08.278 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 0 Redis repository interfaces.
24-11-15.01:47:10.054 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.01:47:10.275 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.01:47:10.291 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.01:47:13.326 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.01:47:13.407 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.01:47:13.478 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#16bbaab3:0/SimpleConnection@1ea96ff2 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 42990]
24-11-15.01:47:13.595 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Started RaffleActivityAccountQuotaServiceTest in 7.295 seconds (JVM running for 8.124)
24-11-15.01:47:13.829 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.01:47:14.060 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.01:47:14.143 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 装配活动：true
24-11-15.01:47:14.153 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期， 状态】校验开始: sku:9011, activityId:100301
24-11-15.01:47:14.153 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。sku:9011, activityId:100301
24-11-15.01:47:14.158 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】成功。sku:9011, activityId:100301
24-11-15.01:47:14.200 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.01:47:14.218 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.01:47:14.238 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 测试结果：011625135943
24-11-15.01:47:14.258 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:47:14.259 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:47:14.260 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:47:14.260 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:47:14.553 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:47:14.558 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:47:14.565 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:47:14.572 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:47:14.576 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:47:14.576 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:47:14.576 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:47:14.576 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:51:04.912 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Starting RaffleActivityAccountQuotaServiceTest using Java 1.8.0_432 on myarch with PID 190076 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.01:51:04.914 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - The following 1 profile is active: "dev"
24-11-15.01:51:06.161 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.01:51:06.167 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.01:51:06.231 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 0 Redis repository interfaces.
24-11-15.01:51:08.165 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.01:51:08.407 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.01:51:08.421 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.01:51:11.548 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.01:51:11.633 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.01:51:11.693 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#16bbaab3:0/SimpleConnection@1ea96ff2 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 41530]
24-11-15.01:51:11.809 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Started RaffleActivityAccountQuotaServiceTest in 7.476 seconds (JVM running for 8.352)
24-11-15.01:51:12.072 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.01:51:12.310 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.01:51:12.400 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 装配活动：true
24-11-15.01:51:12.411 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期， 状态】校验开始: sku:9011, activityId:100301
24-11-15.01:51:12.411 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。sku:9011, activityId:100301
24-11-15.01:51:12.417 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】成功。sku:9011, activityId:100301
24-11-15.01:51:12.458 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.01:51:12.474 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.01:51:12.495 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 测试结果：839663022502
24-11-15.01:51:12.509 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:51:12.510 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:51:12.510 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:51:12.512 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:51:12.762 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:51:12.769 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:51:12.776 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:51:12.782 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:51:12.786 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:51:12.786 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:51:12.786 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:51:12.786 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:56:01.885 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Starting RaffleActivityAccountQuotaServiceTest using Java 1.8.0_432 on myarch with PID 193561 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.01:56:01.887 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - The following 1 profile is active: "dev"
24-11-15.01:56:03.119 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.01:56:03.123 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.01:56:03.165 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
24-11-15.01:56:04.245 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.01:56:04.393 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.01:56:04.402 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.01:56:07.418 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.01:56:07.506 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.01:56:07.557 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#328e4ec2:0/SimpleConnection@2d3c501b [delegate=amqp://admin@127.0.0.1:5672/, localPort= 34000]
24-11-15.01:56:07.655 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Started RaffleActivityAccountQuotaServiceTest in 6.368 seconds (JVM running for 7.233)
24-11-15.01:56:07.865 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.01:56:08.103 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.01:56:08.191 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 装配活动：true
24-11-15.01:56:08.201 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期， 状态】校验开始: sku:9011, activityId:100301
24-11-15.01:56:08.201 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。sku:9011, activityId:100301
24-11-15.01:56:08.208 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】成功。sku:9011, activityId:100301
24-11-15.01:56:08.244 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.01:56:08.260 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.01:56:08.283 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 测试结果：979046839986
24-11-15.01:56:08.297 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:56:08.298 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:56:08.298 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:56:08.299 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.01:56:08.615 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:56:08.623 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:56:08.628 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:56:08.635 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.01:56:08.638 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:56:08.638 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:56:08.638 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:56:08.638 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.01:57:22.787 [main            ] INFO  CreditAdjustServiceTest - Starting CreditAdjustServiceTest using Java 1.8.0_432 on myarch with PID 194509 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.01:57:22.789 [main            ] INFO  CreditAdjustServiceTest - The following 1 profile is active: "dev"
24-11-15.01:57:24.197 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.01:57:24.202 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.01:57:24.268 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 0 Redis repository interfaces.
24-11-15.01:57:26.194 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.01:57:26.449 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.01:57:26.464 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.01:57:29.553 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.01:57:29.628 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.01:57:29.687 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#16bbaab3:0/SimpleConnection@12e3f4ae [delegate=amqp://admin@127.0.0.1:5672/, localPort= 51782]
24-11-15.01:57:29.801 [main            ] INFO  CreditAdjustServiceTest - Started CreditAdjustServiceTest in 7.541 seconds (JVM running for 8.42)
24-11-15.01:57:29.991 [main            ] INFO  CreditAdjustService    - 增加用户积分额度开始 userId:xiaofuge, tradeName: CONVERT_SKU, amount:-1.68
24-11-15.01:57:30.033 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.01:57:30.033 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.01:57:30.074 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务， 更新活动sku库存 sku:9011 activityId:100301
24-11-15.01:57:30.075 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.01:57:30.289 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.01:57:30.289 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.01:57:30.290 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.01:57:30.347 [main            ] INFO  EventPublisher         - 发送MQ消息 topic: credit_adjust_success, message: {"data":{"amount":-1.68,"orderId":"337890049160","outBusinessNo":"70009240609004","userId":"xiaofuge"},"id":"98220506113","timestamp":1731607049996}
24-11-15.01:57:30.358 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"amount":-1.68,"orderId":"337890049160","outBusinessNo":"70009240609004","userId":"xiaofuge"},"id":"98220506113","timestamp":1731607049996}
24-11-15.01:57:30.369 [main            ] INFO  CreditRepository       - 调整账户积分记录，发送MQ消息完成 userId: xiaofuge orderId:337890049160 topic: credit_adjust_success
24-11-15.01:57:30.369 [main            ] INFO  CreditAdjustService    - 增加用户积分额度完成，userId:xiaofuge, orderId:337890049160
24-11-15.01:57:35.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务， 更新活动sku库存 sku:9011 activityId:100301
24-11-15.01:57:40.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务， 更新活动sku库存 sku:9011 activityId:100301
24-11-15.02:03:06.219 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:03:06.220 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:03:06.221 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:03:06.222 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:03:06.482 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:03:06.818 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:03:06.831 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:03:06.831 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:03:06.835 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:03:06.835 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:03:06.835 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:03:06.836 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:07:28.716 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Starting RaffleActivityAccountQuotaServiceTest using Java 1.8.0_432 on myarch with PID 200061 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.02:07:28.718 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - The following 1 profile is active: "dev"
24-11-15.02:07:29.987 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.02:07:29.992 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.02:07:30.049 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 0 Redis repository interfaces.
24-11-15.02:07:31.903 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.02:07:32.167 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.02:07:32.181 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.02:07:35.467 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.02:07:35.550 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.02:07:35.607 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3f357c9d:0/SimpleConnection@785d6a98 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 59766]
24-11-15.02:07:35.717 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Started RaffleActivityAccountQuotaServiceTest in 7.525 seconds (JVM running for 8.435)
24-11-15.02:07:35.950 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.02:07:36.191 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.02:07:36.279 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 装配活动：true
24-11-15.02:07:36.288 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期， 状态】校验开始: sku:9011, activityId:100301
24-11-15.02:07:36.289 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。sku:9011, activityId:100301
24-11-15.02:07:36.296 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】成功。sku:9011, activityId:100301
24-11-15.02:07:36.335 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.02:07:36.349 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.02:07:36.372 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 测试结果：277964024996
24-11-15.02:07:36.385 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:07:36.386 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:07:36.387 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:07:36.387 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:07:36.674 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:07:36.677 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:07:36.684 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:07:36.691 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:07:36.695 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:07:36.695 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:07:36.695 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:07:36.695 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:07:49.820 [main            ] INFO  CreditAdjustServiceTest - Starting CreditAdjustServiceTest using Java 1.8.0_432 on myarch with PID 200441 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.02:07:49.822 [main            ] INFO  CreditAdjustServiceTest - The following 1 profile is active: "dev"
24-11-15.02:07:51.132 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.02:07:51.135 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.02:07:51.184 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 0 Redis repository interfaces.
24-11-15.02:07:52.901 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.02:07:53.182 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.02:07:53.197 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.02:07:57.510 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.02:07:57.617 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.02:07:57.673 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#2de3b052:0/SimpleConnection@1e50eb3f [delegate=amqp://admin@127.0.0.1:5672/, localPort= 47204]
24-11-15.02:07:57.767 [main            ] INFO  CreditAdjustServiceTest - Started CreditAdjustServiceTest in 8.475 seconds (JVM running for 9.312)
24-11-15.02:07:57.963 [main            ] INFO  CreditAdjustService    - 增加用户积分额度开始 userId:xiaofuge, tradeName: CONVERT_SKU, amount:-1.68
24-11-15.02:07:58.139 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.02:07:58.379 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.02:07:58.477 [main            ] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:591484425489
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '70009240609004' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [/home/mufen/Downloads/big-market/big-market-app/target/classes/mybatis/mapper/user_credit_order_mapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values (?, ?, ?, ?, ?, ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '70009240609004' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '70009240609004' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '70009240609004' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy113.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy153.insert(Unknown Source)
	at site.mufen.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:109)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at site.mufen.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:99)
	at site.mufen.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$1968714d.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at site.mufen.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$1f4fe743.saveUserCreditTradeOrder(<generated>)
	at site.mufen.domain.credit.service.CreditAdjustService.createOrder(CreditAdjustService.java:63)
	at site.mufen.test.domain.credit.CreditAdjustServiceTest.test_createOrder_pay(CreditAdjustServiceTest.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '70009240609004' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy210.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 54 common frames omitted
24-11-15.02:07:58.490 [main            ] INFO  EventPublisher         - 发送MQ消息 topic: credit_adjust_success, message: {"data":{"amount":-1.68,"orderId":"591484425489","outBusinessNo":"70009240609004","userId":"xiaofuge"},"id":"77895274276","timestamp":1731607677967}
24-11-15.02:07:58.498 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"amount":-1.68,"orderId":"591484425489","outBusinessNo":"70009240609004","userId":"xiaofuge"},"id":"77895274276","timestamp":1731607677967}
24-11-15.02:07:58.503 [main            ] INFO  CreditRepository       - 调整账户积分记录，发送MQ消息完成 userId: xiaofuge orderId:591484425489 topic: credit_adjust_success
24-11-15.02:07:58.503 [main            ] INFO  CreditAdjustService    - 增加用户积分额度完成，userId:xiaofuge, orderId:591484425489
24-11-15.02:08:00.006 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.02:08:00.023 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.02:08:00.065 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务， 更新活动sku库存 sku:9011 activityId:100301
24-11-15.02:08:00.066 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.02:08:00.083 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.02:08:22.820 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:08:22.821 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:08:22.822 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:08:22.823 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:08:23.580 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:08:23.738 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:08:23.749 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:08:23.755 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:08:23.759 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:08:23.760 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:08:23.760 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:08:23.760 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:08:29.192 [main            ] INFO  CreditAdjustServiceTest - Starting CreditAdjustServiceTest using Java 1.8.0_432 on myarch with PID 201105 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.02:08:29.194 [main            ] INFO  CreditAdjustServiceTest - The following 1 profile is active: "dev"
24-11-15.02:08:30.533 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.02:08:30.538 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.02:08:30.601 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 0 Redis repository interfaces.
24-11-15.02:08:32.342 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.02:08:32.562 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.02:08:32.577 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.02:08:35.710 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.02:08:35.799 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.02:08:35.860 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3f357c9d:0/SimpleConnection@785d6a98 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 51534]
24-11-15.02:08:35.956 [main            ] INFO  CreditAdjustServiceTest - Started CreditAdjustServiceTest in 7.326 seconds (JVM running for 8.193)
24-11-15.02:08:36.143 [main            ] INFO  CreditAdjustService    - 增加用户积分额度开始 userId:xiaofuge, tradeName: CONVERT_SKU, amount:-1.68
24-11-15.02:08:36.314 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.02:08:36.542 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.02:08:36.611 [main            ] INFO  EventPublisher         - 发送MQ消息 topic: credit_adjust_success, message: {"data":{"amount":-1.68,"orderId":"380547536224","outBusinessNo":"70009240609005","userId":"xiaofuge"},"id":"22255967944","timestamp":1731607716146}
24-11-15.02:08:36.618 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"amount":-1.68,"orderId":"380547536224","outBusinessNo":"70009240609005","userId":"xiaofuge"},"id":"22255967944","timestamp":1731607716146}
24-11-15.02:08:36.624 [main            ] INFO  CreditRepository       - 调整账户积分记录，发送MQ消息完成 userId: xiaofuge orderId:380547536224 topic: credit_adjust_success
24-11-15.02:08:36.624 [main            ] INFO  CreditAdjustService    - 增加用户积分额度完成，userId:xiaofuge, orderId:380547536224
24-11-15.02:08:40.009 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.02:08:40.030 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.02:09:16.800 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:09:16.801 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:09:16.803 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:09:16.803 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.02:09:16.935 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:09:16.943 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:09:16.948 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:09:17.687 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.02:09:17.692 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:09:17.692 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:09:17.692 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.02:09:17.693 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:14:37.280 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 46878 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.20:14:37.281 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.20:14:38.207 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.20:14:38.211 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.20:14:38.256 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
24-11-15.20:14:39.372 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.20:14:39.557 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:14:39.567 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:14:42.680 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.20:14:42.767 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.20:14:42.849 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#1ffd0114:0/SimpleConnection@1ba7db2a [delegate=amqp://admin@127.0.0.1:5672/, localPort= 49124]
24-11-15.20:14:42.965 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 6.111 seconds (JVM running for 7.155)
24-11-15.20:14:43.156 [main            ] INFO  RaffleActivityController - 查询sku商品集合开始，activityId:100301
24-11-15.20:14:43.185 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:14:43.430 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:14:43.618 [main            ] INFO  RaffleActivityController - 查询sku商品集合完成 activityId:100301 skuProductResponseDTOS:[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"activityId":100301,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}]
24-11-15.20:14:43.620 [main            ] INFO  RaffleActivityControllerTest - 请求参数：100301
24-11-15.20:14:43.622 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":[{"activityCount":{"dayCount":100,"monthCount":100,"totalCount":100},"activityCountId":11101,"activityId":100301,"productAmount":1.68,"sku":9011,"stockCount":100000,"stockCountSurplus":99886}],"info":"成功"}
24-11-15.20:14:43.640 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:14:43.641 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:14:43.642 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:14:43.642 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:14:43.926 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:14:43.935 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:14:43.940 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:14:43.947 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:14:43.955 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:14:43.956 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:14:43.956 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:14:43.956 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:15:57.026 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 47765 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.20:15:57.028 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.20:15:58.628 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.20:15:58.633 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.20:15:58.704 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 45 ms. Found 0 Redis repository interfaces.
24-11-15.20:16:00.753 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.20:16:01.019 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:16:01.042 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:16:04.077 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.20:16:04.198 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.20:16:04.273 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#25a290ee:0/SimpleConnection@1ba7db2a [delegate=amqp://admin@127.0.0.1:5672/, localPort= 55136]
24-11-15.20:16:04.381 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 8.065 seconds (JVM running for 9.183)
24-11-15.20:16:04.553 [main            ] INFO  RaffleActivityController - 查询用户积分值开始 userId:xiaofuge
24-11-15.20:16:04.578 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:16:04.810 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:16:04.970 [main            ] INFO  RaffleActivityControllerTest - 请求参数："xiaofuge"
24-11-15.20:16:04.985 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":82.49,"info":"成功"}
24-11-15.20:16:04.999 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:16:04.999 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:16:05.000 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:16:05.001 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:16:05.037 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:16:05.054 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:16:05.341 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:16:05.343 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:16:05.351 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:16:05.358 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:16:05.361 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:16:05.362 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:16:05.362 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:16:05.362 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:17:25.791 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 48785 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.20:17:25.794 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.20:17:27.399 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.20:17:27.404 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.20:17:27.467 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 0 Redis repository interfaces.
24-11-15.20:17:29.669 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.20:17:30.030 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:17:30.053 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:17:33.821 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.20:17:33.901 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.20:17:33.953 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#4052913c:0/SimpleConnection@762cdf46 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 57310]
24-11-15.20:17:34.061 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 9.024 seconds (JVM running for 10.116)
24-11-15.20:17:34.274 [main            ] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011 
24-11-15.20:17:34.319 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:17:34.557 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:17:34.652 [main            ] ERROR RaffleActivityController - 积分兑换，支付订单完成 userId:xiaofuge, sku:9011
24-11-15.20:17:34.809 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"sku":9011,"userId":"xiaofuge"}
24-11-15.20:17:34.814 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0001","data":false,"info":"未知失败"}
24-11-15.20:17:35.025 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:17:35.039 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:17:49.060 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:17:49.062 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:17:49.064 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:17:49.066 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:17:50.021 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:17:50.024 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:17:50.033 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:17:50.042 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:17:50.047 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:17:50.047 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:17:50.047 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:17:50.047 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:27:30.885 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 54454 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.20:27:30.886 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.20:27:31.903 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.20:27:31.905 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.20:27:31.942 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 0 Redis repository interfaces.
24-11-15.20:27:33.199 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.20:27:33.387 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:27:33.398 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:27:36.577 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.20:27:36.664 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.20:27:36.719 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6481dce5:0/SimpleConnection@4cacccbf [delegate=amqp://admin@127.0.0.1:5672/, localPort= 56828]
24-11-15.20:27:36.819 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 6.528 seconds (JVM running for 8.739)
24-11-15.20:27:37.053 [main            ] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011 
24-11-15.20:27:42.289 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:27:42.289 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:27:42.813 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:27:42.813 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:27:48.963 [main            ] ERROR RaffleActivityController - 积分兑换，支付订单完成 userId:xiaofuge, sku:9011
24-11-15.20:27:49.036 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:27:49.038 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:27:49.040 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:27:49.042 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:27:49.278 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"sku":9011,"userId":"xiaofuge"}
24-11-15.20:27:49.286 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0001","data":false,"info":"未知失败"}
24-11-15.20:27:49.969 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:27:49.969 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:27:49.969 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:27:49.969 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:27:49.974 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:27:49.975 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:27:49.975 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:27:49.975 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:28:53.435 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 55582 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.20:28:53.436 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.20:28:54.342 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.20:28:54.345 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.20:28:54.397 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 0 Redis repository interfaces.
24-11-15.20:28:55.638 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.20:28:55.828 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:28:55.838 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:28:59.127 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.20:28:59.206 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.20:28:59.292 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6481dce5:0/SimpleConnection@4cacccbf [delegate=amqp://admin@127.0.0.1:5672/, localPort= 53460]
24-11-15.20:28:59.400 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 6.374 seconds (JVM running for 7.603)
24-11-15.20:28:59.626 [main            ] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011 
24-11-15.20:29:48.302 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:29:48.302 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:29:48.857 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:29:48.857 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:29:56.694 [main            ] ERROR RaffleActivityController - 积分兑换，支付订单错误 userId:xiaofuge, sku:9011
24-11-15.20:29:57.017 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"sku":9011,"userId":"xiaofuge"}
24-11-15.20:29:57.028 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0001","data":false,"info":"未知失败"}
24-11-15.20:30:03.295 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:30:03.297 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:30:03.299 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:30:03.300 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:30:03.694 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:30:03.694 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:30:03.695 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:30:03.695 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:30:03.702 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:30:03.703 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:30:03.703 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:30:03.703 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:30:56.694 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 56901 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.20:30:56.696 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.20:30:58.471 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.20:30:58.477 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.20:30:58.546 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 0 Redis repository interfaces.
24-11-15.20:31:00.875 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.20:31:01.175 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:31:01.193 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:31:04.443 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.20:31:04.520 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.20:31:04.574 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#85ab964:0/SimpleConnection@311a09b2 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 57656]
24-11-15.20:31:04.660 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 8.754 seconds (JVM running for 10.403)
24-11-15.20:31:04.877 [main            ] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011 
24-11-15.20:31:44.966 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:31:44.967 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:31:45.478 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:31:45.478 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:33:21.900 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m29s697ms371µs792ns).
24-11-15.20:33:21.900 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m29s697ms371µs632ns).
24-11-15.20:33:21.904 [main            ] INFO  RaffleActivityController - 积分兑换，创建未支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:70009240609002
24-11-15.20:33:21.918 [main            ] INFO  CreditAdjustService    - 增加用户积分额度开始 userId:xiaofuge, tradeName: CONVERT_SKU, amount:null
24-11-15.20:33:23.307 [main            ] ERROR CreditRepository       - 调整账户积分额度失败 userId:xiaofuge orderId:959372125141
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'available_amount' cannot be null
### The error may exist in file [/home/mufen/Downloads/big-market/big-market-app/target/classes/mybatis/mapper/user_credit_account_mapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: update user_credit_account         set available_amount = available_amount + ?,             total_amount = total_amount + ?,             update_time = now()         where user_id = ?
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'available_amount' cannot be null
; Column 'available_amount' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'available_amount' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy111.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:288)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy142.updateAddAccount(Unknown Source)
	at site.mufen.infrastructure.persistent.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:106)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at site.mufen.infrastructure.persistent.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:99)
	at site.mufen.infrastructure.persistent.repository.CreditRepository$$FastClassBySpringCGLIB$$1968714d.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at site.mufen.infrastructure.persistent.repository.CreditRepository$$EnhancerBySpringCGLIB$$c8b3242.saveUserCreditTradeOrder(<generated>)
	at site.mufen.domain.credit.service.CreditAdjustService.createOrder(CreditAdjustService.java:64)
	at site.mufen.trigger.http.RaffleActivityController.creditPayExchangeSku(RaffleActivityController.java:357)
	at site.mufen.test.trigger.RaffleActivityControllerTest.test_creditPayExchangeSku(RaffleActivityControllerTest.java:107)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'available_amount' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy209.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 55 common frames omitted
24-11-15.20:33:23.323 [main            ] INFO  EventPublisher         - 发送MQ消息 topic: credit_adjust_success, message: {"data":{"orderId":"959372125141","outBusinessNo":"70009240609002","userId":"xiaofuge"},"id":"58741238219","timestamp":1731674001923}
24-11-15.20:33:23.326 [main            ] INFO  CreditRepository       - 调整账户积分记录，发送MQ消息完成 userId: xiaofuge orderId:959372125141 topic: credit_adjust_success
24-11-15.20:33:23.327 [main            ] INFO  CreditAdjustService    - 增加用户积分额度完成，userId:xiaofuge, orderId:959372125141
24-11-15.20:33:23.327 [main            ] INFO  RaffleActivityController - 积分兑换，支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:70009240609002 orderId:959372125141
24-11-15.20:33:23.331 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"sku":9011,"userId":"xiaofuge"}
24-11-15.20:33:23.335 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
24-11-15.20:33:23.336 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"orderId":"959372125141","outBusinessNo":"70009240609002","userId":"xiaofuge"},"id":"58741238219","timestamp":1731674001923}
24-11-15.20:33:28.252 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] ERROR CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货失败 topic: credit_adjust_success message: {"data":{"orderId":"959372125141","outBusinessNo":"70009240609002","userId":"xiaofuge"},"id":"58741238219","timestamp":1731674001923}
java.lang.IllegalMonitorStateException: attempt to unlock lock, not locked by current thread by node id: c606d301-10ef-43e1-881d-2b4ab5545310 thread-id: 47
	at org.redisson.RedissonBaseLock.lambda$unlockAsync0$2(RedissonBaseLock.java:290)
	at java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:836)
	at java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:811)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$executeAsync$7(CommandBatchService.java:362)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$execute$9(CommandBatchService.java:471)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.RedisCommonBatchExecutor.handleResult(RedisCommonBatchExecutor.java:164)
	at org.redisson.command.RedisExecutor.checkAttemptPromise(RedisExecutor.java:553)
	at org.redisson.command.RedisExecutor.lambda$execute$5(RedisExecutor.java:195)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.client.handler.CommandDecoder.decodeCommandBatch(CommandDecoder.java:326)
	at org.redisson.client.handler.CommandDecoder.decodeCommand(CommandDecoder.java:217)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:144)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:120)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)
	at io.netty.handler.codec.ReplayingDecoder.callDecode(ReplayingDecoder.java:366)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
24-11-15.20:33:28.254 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] WARN  ConditionalRejectingErrorHandler - Execution of Rabbit message listener failed.
org.springframework.amqp.rabbit.support.ListenerExecutionFailedException: Listener method 'public void site.mufen.trigger.listener.CreditAdjustSuccessConsumer.listener(java.lang.String)' threw exception
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:272)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.lang.IllegalMonitorStateException: attempt to unlock lock, not locked by current thread by node id: c606d301-10ef-43e1-881d-2b4ab5545310 thread-id: 47
	at org.redisson.RedissonBaseLock.lambda$unlockAsync0$2(RedissonBaseLock.java:290)
	at java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:836)
	at java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:811)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$executeAsync$7(CommandBatchService.java:362)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$execute$9(CommandBatchService.java:471)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.RedisCommonBatchExecutor.handleResult(RedisCommonBatchExecutor.java:164)
	at org.redisson.command.RedisExecutor.checkAttemptPromise(RedisExecutor.java:553)
	at org.redisson.command.RedisExecutor.lambda$execute$5(RedisExecutor.java:195)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.client.handler.CommandDecoder.decodeCommandBatch(CommandDecoder.java:326)
	at org.redisson.client.handler.CommandDecoder.decodeCommand(CommandDecoder.java:217)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:144)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:120)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)
	at io.netty.handler.codec.ReplayingDecoder.callDecode(ReplayingDecoder.java:366)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
24-11-15.20:33:28.260 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"orderId":"959372125141","outBusinessNo":"70009240609002","userId":"xiaofuge"},"id":"58741238219","timestamp":1731674001923}
24-11-15.20:33:41.626 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:33:41.628 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:33:41.630 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:33:41.631 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:33:42.249 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:33:42.249 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:33:42.250 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:33:42.252 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:33:42.256 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:33:42.257 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:33:42.257 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:33:42.257 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:33:46.633 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 58696 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.20:33:46.635 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.20:33:48.311 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.20:33:48.316 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.20:33:48.387 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 45 ms. Found 0 Redis repository interfaces.
24-11-15.20:33:50.008 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.20:33:50.189 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:33:50.203 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:33:53.365 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.20:33:53.440 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.20:33:53.489 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#25a290ee:0/SimpleConnection@54e94de9 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 48116]
24-11-15.20:33:53.592 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 7.645 seconds (JVM running for 8.716)
24-11-15.20:33:53.809 [main            ] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011 
24-11-15.20:33:53.853 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:33:54.122 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:33:54.154 [main            ] INFO  RaffleActivityController - 积分兑换，创建未支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:70009240609003
24-11-15.20:33:54.156 [main            ] INFO  CreditAdjustService    - 增加用户积分额度开始 userId:xiaofuge, tradeName: CONVERT_SKU, amount:1.68
24-11-15.20:33:54.392 [main            ] INFO  EventPublisher         - 发送MQ消息 topic: credit_adjust_success, message: {"data":{"amount":1.68,"orderId":"603886103099","outBusinessNo":"70009240609003","userId":"xiaofuge"},"id":"84740112367","timestamp":1731674034158}
24-11-15.20:33:54.399 [main            ] INFO  CreditRepository       - 调整账户积分记录，发送MQ消息完成 userId: xiaofuge orderId:603886103099 topic: credit_adjust_success
24-11-15.20:33:54.399 [main            ] INFO  CreditAdjustService    - 增加用户积分额度完成，userId:xiaofuge, orderId:603886103099
24-11-15.20:33:54.399 [main            ] INFO  RaffleActivityController - 积分兑换，支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:70009240609003 orderId:603886103099
24-11-15.20:33:54.402 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"amount":1.68,"orderId":"603886103099","outBusinessNo":"70009240609003","userId":"xiaofuge"},"id":"84740112367","timestamp":1731674034158}
24-11-15.20:33:54.402 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"sku":9011,"userId":"xiaofuge"}
24-11-15.20:33:54.405 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
24-11-15.20:33:55.019 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:33:55.033 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:34:25.032 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:34:25.034 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:34:25.035 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:34:25.037 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:34:25.468 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:34:25.559 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:34:25.572 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:34:25.577 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:34:25.582 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:34:25.582 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:34:25.582 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:34:25.582 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:35:08.660 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 59609 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.20:35:08.662 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.20:35:10.317 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.20:35:10.324 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.20:35:10.404 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 0 Redis repository interfaces.
24-11-15.20:35:12.710 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.20:35:13.059 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:35:13.076 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:35:16.504 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.20:35:16.609 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.20:35:16.663 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#4052913c:0/SimpleConnection@2cff03cf [delegate=amqp://admin@127.0.0.1:5672/, localPort= 34620]
24-11-15.20:35:16.775 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 8.844 seconds (JVM running for 9.938)
24-11-15.20:35:16.983 [main            ] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011 
24-11-15.20:35:17.035 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:35:17.268 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:35:17.297 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:35:17.321 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:35:17.386 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期， 状态】校验开始: sku:9011, activityId:100301
24-11-15.20:35:17.387 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。sku:9011, activityId:100301
24-11-15.20:35:17.393 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】成功。sku:9011, activityId:100301
24-11-15.20:35:17.444 [main            ] INFO  RaffleActivityController - 积分兑换，创建未支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:043877214674
24-11-15.20:35:17.446 [main            ] INFO  CreditAdjustService    - 增加用户积分额度开始 userId:xiaofuge, tradeName: CONVERT_SKU, amount:1.68
24-11-15.20:35:17.652 [main            ] INFO  EventPublisher         - 发送MQ消息 topic: credit_adjust_success, message: {"data":{"amount":1.68,"orderId":"850802647084","outBusinessNo":"043877214674","userId":"xiaofuge"},"id":"03229054493","timestamp":1731674117447}
24-11-15.20:35:17.659 [main            ] INFO  CreditRepository       - 调整账户积分记录，发送MQ消息完成 userId: xiaofuge orderId:850802647084 topic: credit_adjust_success
24-11-15.20:35:17.659 [main            ] INFO  CreditAdjustService    - 增加用户积分额度完成，userId:xiaofuge, orderId:850802647084
24-11-15.20:35:17.659 [main            ] INFO  RaffleActivityController - 积分兑换，支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:043877214674 orderId:850802647084
24-11-15.20:35:17.661 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"amount":1.68,"orderId":"850802647084","outBusinessNo":"043877214674","userId":"xiaofuge"},"id":"03229054493","timestamp":1731674117447}
24-11-15.20:35:17.663 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"sku":9011,"userId":"xiaofuge"}
24-11-15.20:35:17.666 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
24-11-15.20:35:20.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务， 更新活动sku库存 sku:9011 activityId:100301
24-11-15.20:35:20.011 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:35:20.030 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:35:25.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务， 更新活动sku库存 sku:9011 activityId:100301
24-11-15.20:35:34.309 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:35:34.311 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:35:34.313 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:35:34.315 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:35:34.725 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:35:34.738 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:35:34.751 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:35:34.758 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:35:34.767 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:35:34.768 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:35:34.768 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:35:34.768 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:35:51.521 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 60233 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.20:35:51.523 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.20:35:53.145 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.20:35:53.150 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.20:35:53.216 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 0 Redis repository interfaces.
24-11-15.20:35:55.347 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.20:35:55.672 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:35:55.689 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.20:35:59.412 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.20:35:59.504 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.20:35:59.562 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#2de3b052:0/SimpleConnection@614d7fbf [delegate=amqp://admin@127.0.0.1:5672/, localPort= 40604]
24-11-15.20:35:59.670 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 8.87 seconds (JVM running for 9.916)
24-11-15.20:35:59.861 [main            ] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011 
24-11-15.20:35:59.905 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:36:00.005 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:36:00.143 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:36:00.143 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:36:00.173 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.20:36:00.190 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.20:36:00.241 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期， 状态】校验开始: sku:9011, activityId:100301
24-11-15.20:36:00.241 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。sku:9011, activityId:100301
24-11-15.20:36:00.248 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】成功。sku:9011, activityId:100301
24-11-15.20:36:00.299 [main            ] INFO  RaffleActivityController - 积分兑换，创建未支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:915162818513
24-11-15.20:36:00.301 [main            ] INFO  CreditAdjustService    - 增加用户积分额度开始 userId:xiaofuge, tradeName: CONVERT_SKU, amount:1.68
24-11-15.20:36:00.525 [main            ] INFO  EventPublisher         - 发送MQ消息 topic: credit_adjust_success, message: {"data":{"amount":1.68,"orderId":"880135874733","outBusinessNo":"915162818513","userId":"xiaofuge"},"id":"39929684675","timestamp":1731674160303}
24-11-15.20:36:00.532 [main            ] INFO  CreditRepository       - 调整账户积分记录，发送MQ消息完成 userId: xiaofuge orderId:880135874733 topic: credit_adjust_success
24-11-15.20:36:00.532 [main            ] INFO  CreditAdjustService    - 增加用户积分额度完成，userId:xiaofuge, orderId:880135874733
24-11-15.20:36:00.532 [main            ] INFO  RaffleActivityController - 积分兑换，支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:915162818513 orderId:880135874733
24-11-15.20:36:00.534 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"amount":1.68,"orderId":"880135874733","outBusinessNo":"915162818513","userId":"xiaofuge"},"id":"39929684675","timestamp":1731674160303}
24-11-15.20:36:00.536 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"sku":9011,"userId":"xiaofuge"}
24-11-15.20:36:00.538 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
24-11-15.20:36:05.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务， 更新活动sku库存 sku:9011 activityId:100301
24-11-15.20:36:14.119 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:36:14.121 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:36:14.122 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:36:14.124 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.20:36:14.598 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:36:14.638 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:36:14.654 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:36:14.659 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.20:36:14.666 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:36:14.666 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:36:14.667 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.20:36:14.667 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:12:08.077 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 106093 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.22:12:08.080 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.22:12:09.382 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.22:12:09.387 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.22:12:09.471 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 58 ms. Found 0 Redis repository interfaces.
24-11-15.22:12:11.449 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.22:12:11.732 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.22:12:11.746 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.22:12:15.864 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.22:12:15.943 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.22:12:15.997 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#61d2f267:0/SimpleConnection@5ffd35dd [delegate=amqp://admin@127.0.0.1:5672/, localPort= 60226]
24-11-15.22:12:16.076 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 8.677 seconds (JVM running for 10.208)
24-11-15.22:12:16.315 [main            ] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011 
24-11-15.22:12:20.532 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.22:12:20.532 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.22:12:20.906 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.22:12:20.906 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.22:12:31.338 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.22:12:31.928 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.22:13:01.085 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期， 状态】校验开始: sku:9011, activityId:100301
24-11-15.22:13:04.538 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。sku:9011, activityId:100301
24-11-15.22:13:05.833 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】成功。sku:9011, activityId:100301
24-11-15.22:13:33.054 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务， 更新活动sku库存 sku:9011 activityId:100301
24-11-15.22:14:04.345 [main            ] INFO  RaffleActivityController - 积分兑换，创建未支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:209434544280
24-11-15.22:14:04.349 [main            ] INFO  CreditAdjustService    - 增加用户积分额度开始 userId:xiaofuge, tradeName: CONVERT_SKU, amount:1.68
24-11-15.22:14:04.692 [main            ] INFO  EventPublisher         - 发送MQ消息 topic: credit_adjust_success, message: {"data":{"amount":1.68,"orderId":"574209668037","outBusinessNo":"209434544280","userId":"xiaofuge"},"id":"53046664793","timestamp":1731680044352}
24-11-15.22:14:04.698 [main            ] INFO  CreditRepository       - 调整账户积分记录，发送MQ消息完成 userId: xiaofuge orderId:574209668037 topic: credit_adjust_success
24-11-15.22:14:04.698 [main            ] INFO  CreditAdjustService    - 增加用户积分额度完成，userId:xiaofuge, orderId:574209668037
24-11-15.22:14:04.698 [main            ] INFO  RaffleActivityController - 积分兑换，支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:209434544280 orderId:574209668037
24-11-15.22:14:04.701 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"amount":1.68,"orderId":"574209668037","outBusinessNo":"209434544280","userId":"xiaofuge"},"id":"53046664793","timestamp":1731680044352}
24-11-15.22:14:04.701 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"sku":9011,"userId":"xiaofuge"}
24-11-15.22:14:04.704 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
24-11-15.22:14:07.949 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] ERROR CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货失败 topic: credit_adjust_success message: {"data":{"amount":1.68,"orderId":"574209668037","outBusinessNo":"209434544280","userId":"xiaofuge"},"id":"53046664793","timestamp":1731680044352}
java.lang.IllegalMonitorStateException: attempt to unlock lock, not locked by current thread by node id: 0a6ca84d-066c-49d4-8730-9040dc0a7eb6 thread-id: 47
	at org.redisson.RedissonBaseLock.lambda$unlockAsync0$2(RedissonBaseLock.java:290)
	at java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:836)
	at java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:811)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$executeAsync$7(CommandBatchService.java:362)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$execute$9(CommandBatchService.java:471)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.RedisCommonBatchExecutor.handleResult(RedisCommonBatchExecutor.java:164)
	at org.redisson.command.RedisExecutor.checkAttemptPromise(RedisExecutor.java:553)
	at org.redisson.command.RedisExecutor.lambda$execute$5(RedisExecutor.java:195)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.client.handler.CommandDecoder.decodeCommandBatch(CommandDecoder.java:326)
	at org.redisson.client.handler.CommandDecoder.decodeCommand(CommandDecoder.java:217)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:144)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:120)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)
	at io.netty.handler.codec.ReplayingDecoder.callDecode(ReplayingDecoder.java:366)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
24-11-15.22:14:07.950 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] WARN  ConditionalRejectingErrorHandler - Execution of Rabbit message listener failed.
org.springframework.amqp.rabbit.support.ListenerExecutionFailedException: Listener method 'public void site.mufen.trigger.listener.CreditAdjustSuccessConsumer.listener(java.lang.String)' threw exception
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:272)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.lang.IllegalMonitorStateException: attempt to unlock lock, not locked by current thread by node id: 0a6ca84d-066c-49d4-8730-9040dc0a7eb6 thread-id: 47
	at org.redisson.RedissonBaseLock.lambda$unlockAsync0$2(RedissonBaseLock.java:290)
	at java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:836)
	at java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:811)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$executeAsync$7(CommandBatchService.java:362)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.CommandBatchService.lambda$execute$9(CommandBatchService.java:471)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.command.RedisCommonBatchExecutor.handleResult(RedisCommonBatchExecutor.java:164)
	at org.redisson.command.RedisExecutor.checkAttemptPromise(RedisExecutor.java:553)
	at org.redisson.command.RedisExecutor.lambda$execute$5(RedisExecutor.java:195)
	at java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:774)
	at java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1975)
	at org.redisson.client.handler.CommandDecoder.decodeCommandBatch(CommandDecoder.java:326)
	at org.redisson.client.handler.CommandDecoder.decodeCommand(CommandDecoder.java:217)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:144)
	at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:120)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)
	at io.netty.handler.codec.ReplayingDecoder.callDecode(ReplayingDecoder.java:366)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
24-11-15.22:14:07.954 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"amount":1.68,"orderId":"574209668037","outBusinessNo":"209434544280","userId":"xiaofuge"},"id":"53046664793","timestamp":1731680044352}
24-11-15.22:14:21.073 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:14:21.074 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:14:21.075 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:14:21.075 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:14:21.997 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:14:21.997 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:14:21.998 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:14:21.998 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:14:22.002 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:14:22.003 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:14:22.003 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:14:22.003 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:14:26.047 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 107502 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.22:14:26.049 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.22:14:27.412 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.22:14:27.417 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.22:14:27.480 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 0 Redis repository interfaces.
24-11-15.22:14:29.166 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.22:14:29.407 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.22:14:29.424 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.22:14:33.416 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.22:14:33.496 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.22:14:33.561 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#ca546a1:0/SimpleConnection@3cb49121 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 57600]
24-11-15.22:14:33.654 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 8.105 seconds (JVM running for 9.045)
24-11-15.22:14:33.820 [main            ] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011 
24-11-15.22:14:33.861 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.22:14:34.086 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.22:14:34.115 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.22:14:34.137 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.22:14:34.194 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期， 状态】校验开始: sku:9011, activityId:100301
24-11-15.22:14:34.194 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。sku:9011, activityId:100301
24-11-15.22:14:34.199 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】成功。sku:9011, activityId:100301
24-11-15.22:14:34.246 [main            ] INFO  RaffleActivityController - 积分兑换，创建未支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:654741123871
24-11-15.22:14:34.248 [main            ] INFO  CreditAdjustService    - 增加用户积分额度开始 userId:xiaofuge, tradeName: CONVERT_SKU, amount:1.68
24-11-15.22:14:34.463 [main            ] INFO  EventPublisher         - 发送MQ消息 topic: credit_adjust_success, message: {"data":{"amount":1.68,"orderId":"141927834367","outBusinessNo":"654741123871","userId":"xiaofuge"},"id":"60270887920","timestamp":1731680074250}
24-11-15.22:14:34.470 [main            ] INFO  CreditRepository       - 调整账户积分记录，发送MQ消息完成 userId: xiaofuge orderId:141927834367 topic: credit_adjust_success
24-11-15.22:14:34.470 [main            ] INFO  CreditAdjustService    - 增加用户积分额度完成，userId:xiaofuge, orderId:141927834367
24-11-15.22:14:34.470 [main            ] INFO  RaffleActivityController - 积分兑换，支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:654741123871 orderId:141927834367
24-11-15.22:14:34.471 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"amount":1.68,"orderId":"141927834367","outBusinessNo":"654741123871","userId":"xiaofuge"},"id":"60270887920","timestamp":1731680074250}
24-11-15.22:14:34.473 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"sku":9011,"userId":"xiaofuge"}
24-11-15.22:14:34.475 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
24-11-15.22:14:35.012 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.22:14:35.022 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.22:14:40.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务， 更新活动sku库存 sku:9011 activityId:100301
24-11-15.22:14:57.372 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:14:57.406 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:14:57.408 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:14:57.409 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:14:57.529 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:14:57.620 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:14:57.636 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:14:57.641 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:14:57.647 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:14:57.647 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:14:57.647 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:14:57.647 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:15:07.704 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 108159 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.22:15:07.706 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.22:15:09.062 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.22:15:09.067 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.22:15:09.116 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 0 Redis repository interfaces.
24-11-15.22:15:10.980 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.22:15:11.233 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.22:15:11.249 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.22:15:15.507 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.22:15:15.580 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.22:15:15.639 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#9729a97:0/SimpleConnection@924f3f1 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 55662]
24-11-15.22:15:15.737 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 8.609 seconds (JVM running for 9.411)
24-11-15.22:15:15.910 [main            ] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011 
24-11-15.22:15:15.952 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.22:15:16.171 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.22:15:16.201 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.22:15:16.224 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.22:15:16.283 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期， 状态】校验开始: sku:9011, activityId:100301
24-11-15.22:15:16.284 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。sku:9011, activityId:100301
24-11-15.22:15:16.290 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】成功。sku:9011, activityId:100301
24-11-15.22:15:16.336 [main            ] INFO  RaffleActivityController - 积分兑换，创建未支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:786694135299
24-11-15.22:15:16.338 [main            ] INFO  CreditAdjustService    - 增加用户积分额度开始 userId:xiaofuge, tradeName: CONVERT_SKU, amount:1.68
24-11-15.22:15:16.542 [main            ] INFO  EventPublisher         - 发送MQ消息 topic: credit_adjust_success, message: {"data":{"amount":1.68,"orderId":"201798333327","outBusinessNo":"786694135299","userId":"xiaofuge"},"id":"16493233389","timestamp":1731680116340}
24-11-15.22:15:16.548 [main            ] INFO  CreditRepository       - 调整账户积分记录，发送MQ消息完成 userId: xiaofuge orderId:201798333327 topic: credit_adjust_success
24-11-15.22:15:16.549 [main            ] INFO  CreditAdjustService    - 增加用户积分额度完成，userId:xiaofuge, orderId:201798333327
24-11-15.22:15:16.549 [main            ] INFO  RaffleActivityController - 积分兑换，支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:786694135299 orderId:201798333327
24-11-15.22:15:16.550 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"amount":1.68,"orderId":"201798333327","outBusinessNo":"786694135299","userId":"xiaofuge"},"id":"16493233389","timestamp":1731680116340}
24-11-15.22:15:16.552 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"sku":9011,"userId":"xiaofuge"}
24-11-15.22:15:16.554 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
24-11-15.22:15:19.169 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:15:19.170 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:15:19.171 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:15:19.173 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:15:19.600 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:15:19.699 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:15:19.712 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:15:19.719 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:15:19.723 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:15:19.724 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:15:19.724 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:15:19.724 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:32:28.299 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on myarch with PID 117639 (started by mufen in /home/mufen/Downloads/big-market/big-market-app)
24-11-15.22:32:28.301 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-11-15.22:32:29.800 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-15.22:32:29.805 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-15.22:32:29.884 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 54 ms. Found 0 Redis repository interfaces.
24-11-15.22:32:31.539 [main            ] INFO  Version                - Redisson 3.23.4
24-11-15.22:32:31.713 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.22:32:31.727 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-15.22:32:34.693 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-15.22:32:34.775 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-15.22:32:34.829 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#14874a5d:0/SimpleConnection@6f80cf5 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 43050]
24-11-15.22:32:34.916 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 7.353 seconds (JVM running for 8.723)
24-11-15.22:32:35.070 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务， 更新活动sku库存 sku:9011 activityId:100301
24-11-15.22:32:35.090 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.22:32:35.144 [main            ] INFO  RaffleActivityController - 积分兑换商品开始 userId:xiaofuge sku:9011 
24-11-15.22:32:40.963 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.22:32:41.223 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.22:32:41.225 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.22:32:41.913 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-15.22:32:41.937 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期， 状态】校验开始: sku:9011, activityId:100301
24-11-15.22:32:42.457 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。sku:9011, activityId:100301
24-11-15.22:32:42.674 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-15.22:32:42.676 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】成功。sku:9011, activityId:100301
24-11-15.22:32:44.057 [main            ] INFO  RaffleActivityController - 积分兑换，创建未支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:692283984844
24-11-15.22:32:44.060 [main            ] INFO  CreditAdjustService    - 增加用户积分额度开始 userId:xiaofuge, tradeName:CONVERT_SKU, tradeType:REVERSE, amount:1.68
24-11-15.22:32:44.445 [main            ] INFO  EventPublisher         - 发送MQ消息 topic: credit_adjust_success, message: {"data":{"amount":1.68,"orderId":"844448327780","outBusinessNo":"692283984844","userId":"xiaofuge"},"id":"55763694059","timestamp":1731681164062}
24-11-15.22:32:44.451 [main            ] INFO  CreditRepository       - 调整账户积分记录，发送MQ消息完成 userId: xiaofuge orderId:844448327780 topic: credit_adjust_success
24-11-15.22:32:44.452 [main            ] INFO  CreditAdjustService    - 增加用户积分额度完成，userId:xiaofuge, orderId:844448327780
24-11-15.22:32:44.452 [main            ] INFO  RaffleActivityController - 积分兑换，支付订单完成 userId:xiaofuge, sku:9011, outBusinessNo:692283984844 orderId:844448327780
24-11-15.22:32:44.456 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"sku":9011,"userId":"xiaofuge"}
24-11-15.22:32:44.456 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  CreditAdjustSuccessConsumer - 监听积分账户调整成功消息，进行交易商品发货 topic:credit_adjust_success message:{"data":{"amount":1.68,"orderId":"844448327780","outBusinessNo":"692283984844","userId":"xiaofuge"},"id":"55763694059","timestamp":1731681164062}
24-11-15.22:32:44.460 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
24-11-15.22:32:46.306 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务， 更新活动sku库存 sku:9011 activityId:100301
24-11-15.22:33:08.893 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:33:08.895 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:33:08.896 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:33:08.897 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-15.22:33:09.312 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:33:09.312 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:33:09.312 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:33:09.328 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-15.22:33:09.333 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:33:09.334 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:33:09.334 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-15.22:33:09.334 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
